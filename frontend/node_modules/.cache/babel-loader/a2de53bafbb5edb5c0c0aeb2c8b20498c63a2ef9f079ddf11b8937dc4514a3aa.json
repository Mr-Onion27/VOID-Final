{"ast":null,"code":"import React from\"react\";import{Navigate}from\"react-router-dom\";import{jwtDecode}from\"jwt-decode\";// ✅ FIXED named import\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRole}=_ref;const token=localStorage.getItem(\"token\");if(!token)return/*#__PURE__*/_jsx(Navigate,{to:\"/\",state:{error:\"Session expired\"}});try{const decoded=jwtDecode(token);const roleField=allowedRole===\"student\"?\"regno\":allowedRole===\"faculty\"?\"fac_id\":allowedRole===\"admin\"?\"adminID\":null;if(!decoded||!decoded[roleField]){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",state:{error:\"Unauthorized access\"}});}return children;}catch(error){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",state:{error:\"Invalid session\"}});}};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","jwtDecode","jsx","_jsx","ProtectedRoute","_ref","children","allowedRole","token","localStorage","getItem","to","state","error","decoded","roleField"],"sources":["D:/New folder (2)/my-app/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { jwtDecode } from \"jwt-decode\"; // ✅ FIXED named import\r\n\r\nconst ProtectedRoute = ({ children, allowedRole }) => {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  if (!token) return <Navigate to=\"/\" state={{ error: \"Session expired\" }} />;\r\n\r\n  try {\r\n    const decoded = jwtDecode(token);\r\n\r\n    const roleField = allowedRole === \"student\" ? \"regno\"\r\n                   : allowedRole === \"faculty\" ? \"fac_id\"\r\n                   : allowedRole === \"admin\" ? \"adminID\"\r\n                   : null;\r\n\r\n    if (!decoded || !decoded[roleField]) {\r\n      return <Navigate to=\"/\" state={{ error: \"Unauthorized access\" }} />;\r\n    }\r\n\r\n    return children;\r\n  } catch (error) {\r\n    return <Navigate to=\"/\" state={{ error: \"Invalid session\" }} />;\r\n  }\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,SAAS,KAAQ,YAAY,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA+B,IAA9B,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAAF,IAAA,CAC/C,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,mBAAOL,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,GAAG,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,iBAAkB,CAAE,CAAE,CAAC,CAE3E,GAAI,CACF,KAAM,CAAAC,OAAO,CAAGb,SAAS,CAACO,KAAK,CAAC,CAEhC,KAAM,CAAAO,SAAS,CAAGR,WAAW,GAAK,SAAS,CAAG,OAAO,CACpCA,WAAW,GAAK,SAAS,CAAG,QAAQ,CACpCA,WAAW,GAAK,OAAO,CAAG,SAAS,CACnC,IAAI,CAErB,GAAI,CAACO,OAAO,EAAI,CAACA,OAAO,CAACC,SAAS,CAAC,CAAE,CACnC,mBAAOZ,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,GAAG,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,qBAAsB,CAAE,CAAE,CAAC,CACrE,CAEA,MAAO,CAAAP,QAAQ,CACjB,CAAE,MAAOO,KAAK,CAAE,CACd,mBAAOV,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,GAAG,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,iBAAkB,CAAE,CAAE,CAAC,CACjE,CACF,CAAC,CAED,cAAe,CAAAT,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}