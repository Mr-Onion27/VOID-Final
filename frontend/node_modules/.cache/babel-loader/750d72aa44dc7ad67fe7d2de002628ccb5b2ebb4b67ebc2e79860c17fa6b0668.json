{"ast":null,"code":"// src/components/SessionGuard.js\nimport{useEffect}from\"react\";import{useLocation}from\"react-router-dom\";const SessionGuard=()=>{const location=useLocation();useEffect(()=>{const token=localStorage.getItem(\"token\");const isLoggedIn=sessionStorage.getItem(\"isLoggedIn\");const handlePageShow=event=>{var _performance$getEntri;const navType=(_performance$getEntri=performance.getEntriesByType(\"navigation\")[0])===null||_performance$getEntri===void 0?void 0:_performance$getEntri.type;if((event.persisted||navType===\"back_forward\")&&(!token||!isLoggedIn)){window.location.href=\"/?error=500\";// Force to Home if session is invalid\n}};window.addEventListener(\"pageshow\",handlePageShow);return()=>{window.removeEventListener(\"pageshow\",handlePageShow);};},[location]);return null;// this component doesn't render anything\n};export default SessionGuard;","map":{"version":3,"names":["useEffect","useLocation","SessionGuard","location","token","localStorage","getItem","isLoggedIn","sessionStorage","handlePageShow","event","_performance$getEntri","navType","performance","getEntriesByType","type","persisted","window","href","addEventListener","removeEventListener"],"sources":["D:/New folder (2)/my-app/frontend/src/sessionGuard.js"],"sourcesContent":["// src/components/SessionGuard.js\r\nimport { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst SessionGuard = () => {\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const isLoggedIn = sessionStorage.getItem(\"isLoggedIn\");\r\n\r\n    const handlePageShow = (event) => {\r\n      const navType = performance.getEntriesByType(\"navigation\")[0]?.type;\r\n      if ((event.persisted || navType === \"back_forward\") && (!token || !isLoggedIn)) {\r\n        window.location.href = \"/?error=500\"; // Force to Home if session is invalid\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"pageshow\", handlePageShow);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"pageshow\", handlePageShow);\r\n    };\r\n  }, [location]);\r\n\r\n  return null; // this component doesn't render anything\r\n};\r\n\r\nexport default SessionGuard;\r\n"],"mappings":"AAAA;AACA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,QAAQ,CAAGF,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAI,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,UAAU,CAAGC,cAAc,CAACF,OAAO,CAAC,YAAY,CAAC,CAEvD,KAAM,CAAAG,cAAc,CAAIC,KAAK,EAAK,KAAAC,qBAAA,CAChC,KAAM,CAAAC,OAAO,EAAAD,qBAAA,CAAGE,WAAW,CAACC,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,UAAAH,qBAAA,iBAA7CA,qBAAA,CAA+CI,IAAI,CACnE,GAAI,CAACL,KAAK,CAACM,SAAS,EAAIJ,OAAO,GAAK,cAAc,IAAM,CAACR,KAAK,EAAI,CAACG,UAAU,CAAC,CAAE,CAC9EU,MAAM,CAACd,QAAQ,CAACe,IAAI,CAAG,aAAa,CAAE;AACxC,CACF,CAAC,CAEDD,MAAM,CAACE,gBAAgB,CAAC,UAAU,CAAEV,cAAc,CAAC,CAEnD,MAAO,IAAM,CACXQ,MAAM,CAACG,mBAAmB,CAAC,UAAU,CAAEX,cAAc,CAAC,CACxD,CAAC,CACH,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEd,MAAO,KAAI,CAAE;AACf,CAAC,CAED,cAAe,CAAAD,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}